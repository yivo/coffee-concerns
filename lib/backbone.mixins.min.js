!function(i,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,n){return t(i,n)});else if("undefined"!=typeof exports){var n=require("backbone"),e=require("underscore");module.exports=t(n,e)}else t(i.Backbone,i._)}(this,function(i,t){"use strict";var n={use:function(){return this.__mixins||(this.__mixins=[]),t.each(arguments,function(i){this.using(i)||(this.__mixins.push(i),t.extend(this.prototype,t.omit(i,"initialize")))},this),this},using:function(i){var t=this;do if(t.__mixins&&-1!==t.__mixins.indexOf(i))return!0;while(t.__super__&&(t=t.__super__.constructor));return!1}},e={use:function(){return this.__mixins||(this.__mixins=[]),t.each(arguments,function(i){this.using(i)||(t.extend(this,t.omit(i,"initialize")),this.__mixins.push(i),i.initialize&&i.initialize.call(this))},this),this},using:function(i){return this.constructor.using(i)||this.__mixins&&-1!==this.__mixins.indexOf(i)},__initializePlugins:function(){var i=this.constructor.__cachedPlugins;if(!this.constructor.__cachedPlugins){var t,n=this.constructor;i=[];do n.__mixins&&n.__mixins.length&&(i=i.concat(n.__mixins));while(n.__super__&&(n=n.__super__.constructor));this.constructor.__cachedPlugins=i}for(var e=i.length;--e>=0&&(t=i[e]);)t.initialize&&t.initialize.apply(this,arguments);return this}};t.each(["Model","View","Collection","Router","History"],function(s){i[s]=function(i){var n=function(){return this.__initializePlugins.apply(this,arguments),i.apply(this,arguments)};return t.extend(n,i),n.prototype=i.prototype,n.prototype.constructor=n,n}(i[s]),t.extend(i[s],n),t.extend(i[s].prototype,e)}),i.Collection.prototype.model=i.Model});